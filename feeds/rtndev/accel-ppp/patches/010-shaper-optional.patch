--- a/accel-pppd/CMakeLists.txt
+++ b/accel-pppd/CMakeLists.txt
@@ -39,7 +39,14 @@
 ADD_SUBDIRECTORY(logs)
 ADD_SUBDIRECTORY(extra)
 ADD_SUBDIRECTORY(ipv6)
-ADD_SUBDIRECTORY(shaper)
+
+IF (NOT DEFINED SHAPER)
+	SET(SHAPER TRUE)
+ENDIF (NOT DEFINED SHAPER)
+
+IF (SHAPER)
+	ADD_SUBDIRECTORY(shaper)
+ENDIF (SHAPER)
 
 ADD_EXECUTABLE(accel-pppd
 	ppp/ppp.c
