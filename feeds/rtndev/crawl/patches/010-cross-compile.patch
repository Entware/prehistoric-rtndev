--- a/source/Makefile
+++ b/source/Makefile
@@ -120,13 +120,13 @@
 CFOPTIMIZE += -flto=jobserver -fwhole-program
 endif
 
-CFOTHERS := -pipe $(EXTERNAL_FLAGS)
+CFOTHERS := $(EXTERNAL_FLAGS)
 CFWARN := -Wall -Wformat-security
 CFWARN_L := -Wundef
 
 DEFINES := $(EXTERNAL_DEFINES)
 
-LDFLAGS := $(EXTERNAL_LDFLAGS)
+LDFLAGS += $(EXTERNAL_LDFLAGS)
 
 #
 # The GCC and GXX variables are set later.
@@ -200,6 +200,7 @@
 	endif
 
 endif
+BUILD_LUA = yes
 ifneq (,$(findstring MINGW,$(uname_S)))
 	GAME = crawl.exe
 	bin_prefix = .
@@ -270,7 +271,7 @@
 LIBPNG := contrib/install/$(ARCH)/lib/libpng.a
 LIBSDLIMAGE := contrib/install/$(ARCH)/lib/libSDL_image.a
 LIBFREETYPE := contrib/install/$(ARCH)/lib/libfreetype.a
-LIBSQLITE := contrib/install/$(ARCH)/lib/libsqlite3.a
+LIBSQLITE := -lsqlite3
 ifdef USE_LUAJIT
 LIBLUA := contrib/install/$(ARCH)/lib/libluajit.a
 else
@@ -279,7 +280,7 @@
 LIBZ := contrib/install/$(ARCH)/lib/libz.a
 
 ifndef CROSSHOST
-	SQLITE_INCLUDE_DIR := /usr/include
+	SQLITE_INCLUDE_DIR := .
 else
 	# This is totally wrong, works only with some old-style setups, and
 	# on some architectures of Debian/new FHS multiarch -- excluding, for
@@ -389,7 +390,6 @@
 
 
 INCLUDES_L += -Icontrib/install/$(ARCH)/include
-LIBS += -Lcontrib/install/$(ARCH)/lib
 
 INCLUDES_L += -Iutil -I.
 
@@ -894,10 +894,8 @@
 NC_INCLUDE = $(NC_PREFIX)/include/ncursesw
 endif
 
-INCLUDES_L += -I$(NC_INCLUDE)
-
 ifndef TILES
-LIBS += -L$(NC_PREFIX)/lib -l$(NC_LIB)
+LIBS += -l$(NC_LIB)
 endif
 
 endif
@@ -918,13 +916,12 @@
 CFWARN_L :=
 endif
 
-LDFLAGS += $(CFOPTIMIZE) $(CFOPTIMIZE_L)
 
 ifdef REPORT
 CFOTHERS += -ftime-report
 endif
 
-CFLAGS   := $(CFOPTIMIZE) $(CFOTHERS) $(CFWARN)
+CFLAGS   += $(CFOTHERS) $(CFWARN)
 CFLAGS_L := $(CFOPTIMIZE_L) $(DEFINES_L) $(CFWARN_L) $(INCLUDES_L) $(CFOTHERS_L)
 ALL_CFLAGS := $(CFLAGS) $(CFLAGS_L)
 YACC_CFLAGS  := $(ALL_CFLAGS) -Wno-unused-function -Wno-sign-compare -DYYENABLE_NLS=0 -DYYLTYPE_IS_TRIVIAL=0
@@ -1019,8 +1016,7 @@
 CONTRIB_LIBS += $(LIBLUA)
 endif
 ifdef BUILD_SQLITE
-CONTRIBS += sqlite
-CONTRIB_LIBS += $(LIBSQLITE)
+LIBS += $(LIBSQLITE)
 endif
 
 EXTRA_OBJECTS += version.o
